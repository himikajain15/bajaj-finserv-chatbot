import streamlit as st
from modules.response_router import route_query

st.set_page_config(page_title="Bajaj Finserv Chatbot", layout="wide")

# Load custom CSS
with open(r"styles\banking.css") as f:
    st.markdown(f"<style>{f.read()}</style>", unsafe_allow_html=True)

# Header
st.markdown(
    """
    <div class='header'>
        <img src='data:image/png;base64,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' class='logo'>
        <span style='font-size: 1.6rem; font-weight: bold;'>Bajaj Finserv Banking Assistant</span>
    </div>
    """,
    unsafe_allow_html=True
)

query = st.text_input("ðŸ’¬ Ask your question (e.g. 'Why is BAGIC facing headwinds?')")

if st.button("ðŸ“¨ Ask"):
    if query:
        st.markdown(f"<div class='stChatMessage user-bubble'>{query}</div>", unsafe_allow_html=True)
        with st.spinner("Assisting..."):
            response = route_query(query)
        st.markdown(f"<div class='stChatMessage bot-bubble'>{response}</div>", unsafe_allow_html=True)

